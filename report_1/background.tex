\section{Background}
In this section some basics concepts related to the human walking are introduced. Later they will
be applied to the robot walking 
\subsection{Locomotion in human being}
The \emph{gait cycle} is defined as the time between two successive foot contact of the same limbs,
it can be divided in two phases, the \emph{Stance Phase}  and the \emph{Swing phase}.
For analyzing gait cycle one foot is taken as reference and its movements studied.
The Stance phase is the part of a gait cycle during which the foot remains in contact with the
ground, it constitutes about the $60\%$ of the gait cycle. In this phase five parts can be
distinguished:
\begin{itemize}
\item [-]\emph{Initial contact}: Instant the foot contacts the ground;
\item [-]\emph{Loading response}: Time period between the initial contact phase and the instant
  when the other foot lifts the ground;
\item [-]\emph{Mid stance}: Time interval from the end of the Loading response phase to the time
  when both ankles are aligned in the frontal plane;
\item[-]\emph{Terminal stance}: Period from ankles alignment to the contact of the swinging foot;
\item[-]\emph{Pre swing}: Time interval between the end of the terminal stance phase and the instant
  when the foot lifts from the ground.
\end{itemize}
The Swing phase is the phase of the gait during which the reference swings. It takes about $40\%$ of the gait cycle. Three parts can be distinguished:
\begin{itemize}
\item [-]\emph{Initial swing}: Phase during which the reference foot is lifted from the ground
  to position of maximum  knee flexion;
\item [-]\emph{Mid swing}: Time period between the initial contact phase and the instant when the other foot lifts the ground;
\item[-]\emph{Terminal swing}: Following vertical tibia position to just prior to initial contact.
\end{itemize}
Last but not least the concepts of Double and Single support are introduced. The first one refers to
the period during which boot feet are in contact with the ground while the other refers to interval when only one foot is in contact with the ground.
\par
In figure \ref{fig:gait-cycle} all the phases described above are shown. For each phase the type of support (single or double) is specified.
\begin{figure}[!ht]
  \centering
  \includegraphics[scale=0.45]{gait-cycle.png}
  \caption{Classification of a human gait cycle. Image taken from \cite{Merker2015}. \label{fig:gait-cycle}}
\end{figure}
\par
In the following subsection the concepts described will be applied to the robot walking.
\subsection{Locomotion in robotic systems}
In robot locomotion the gait cycle described in the above section is simplified,
and the phases described are condensed in more general groups.
The walking task can be easy summarize using the \emph{walking cycle}
(Figure \ref{fig:walking_fsm}), it embeds all the phases of the human locomotion
shown in the figure \ref{fig:gait-cycle}. 
\begin{figure}[!ht]
  \centering
  \includegraphics[scale=0.4]{walking_fsm}
  \caption{Walking cycle state machine. \label{fig:walking_fsm}}
\end{figure}
\par
The cycle can be split in two main phases, the Double support and the Single support ones.
The first one embeds the initial contact, the loading response and the pre swing phases while the
single support phase embeds the others.
During the SS phase the movement of the swing foot (i.e. the non reference foot)
is usually split in three sub-phases, \emph{detachment}, \emph{swing} and \emph{impact}.
More detailed:
\begin{itemize}
\item[-]\emph{Detachment}: Instant when the foot lifts from the ground;
\item[-]\emph{Swing}: this phase embeds the Initial swing, the mid swing and the terminal swing
  stages of the human walking;
\item[-]\emph{Impact}: Instant the foot contacts the ground.
\end{itemize}
In the following of this report only the single support phase is analyzed. Initially from the point
of view of the reference foot and the robot center of mass. Later the movement of the swing foot is
studied. 

\subsection{Zero Momentum Point}
In order to derive a model for the robot locomotion the \emph{zero momentum point} concept
\cite{Vukobratovic1969} must be discussed.
In the following dissertation only the single support phase is considered and in order to simplify the analysis only the support foot is considered.
\par
In the free body diagram of the reference foot (Fig \ref{fig:zmp_foot}) the influence of the
entire robot on the foot is replaced by the force applied to the point $A$
($\vec{F}_A$) and the torque relative to $A$ ($\vec{M}_A$) while the
total ground reaction consist on a force applied to the point $P$ ($\vec{R}$) and a torque
relative to $A$ ($\vec{M}$), finally the weight of the foot itself acts at its gravity center $G$.
\begin{figure}[!ht]
  \centering
  \includegraphics[scale=1.5]{zmp_foot}
  \caption{Free body diagram of the reference foot. Image edit from \cite{Vukobratov2004}. \label{fig:zmp_foot}}
\end{figure}
The horizontal components of the reaction force $\vec{R}$ ($R_x$ and $R_y$) are 
the friction force necessary to balance the horizontal components of the force $\vec{F}_A$, while
the vertical component of the reaction torque $\vec{M}$ ($M_z$) represents moment generated by the
friction reaction forces and it balances the vertical component of the torque $\vec{M}_A$.
In the following the reference foot is assumed in contact with the ground without sliding, therefore
the friction compensates the horizontal force components ($R_x$, $R_y$) and vertical reaction torque
($M_z$). The vertical reaction force $R_z$ compensates the vertical component of the force
$\vec{F}_A$ and the weight of the foot itself.  
\par
Finally it is very interesting to study the balancing of the horizontal component of the
torque $\vec{M_A}$ ($M_{A_x}$ and $M_{A_y}$). Because of the unilateral nature of the constraint between
the reference foot and the ground, these components can be only compensate by changing
the position of the point $P$ within the convex hull of the support polygon.
\par
In the Figure \ref{fig:zmp_foot_y} a simple planar case in sagittal plane is presented. In this
simple scenario the component $M_{A_x}$ is balanced by shifting the point $P$ 
\begin{figure}[!ht]
  \centering
  \includegraphics[scale=1.5]{zmp_foot_y}
  \caption{Example of a planar case. Image taken from \cite{Vukobratov2004}. \label{fig:zmp_foot_y}}
\end{figure}

It is important to note that all the time the reaction force $\vec{R}$ is within the support polygon
the ankle moment is full compensate by changing the position of the point $P$ and the horizontal
components of the interaction torque with the ground are zero. In the light of this statement in the
Figure \ref{fig:zmp_foot} only the component $M_z$ exists.
However, in the case which the sole is not large enough to allow the appropriate position of the
point $P$ the force $\vec{R}$ acts at the edge of the foot and the horizontal components $M_x$ and
$M_y$ are different from zero.
\par
The reasoning presented above can be summarized in the following principle \cite{Vukobratov2004}.
\begin{principle}
  The necessary and sufficient condition for the locomotion mechanism to be stable
  is that for the point $P$ on the sole where the ground reaction force is acting
  \[
  M_x = 0 \quad M_y = 0
  \]
\end{principle}
\subsubsection{Zero Momentum Point evaluation}
In this section the position of the zero momentum point is evaluated. It should be noted that the
prerequisite of the stability of the entire robot is the stability of the contact between the
reference foot and the ground. Thus for the supporting foot the following equations hold 
\[
\vec{R} + \vec{F}_A + m_s \vec{g} = \vec{0}
\]
\begin{equation}
  \label{eq:zmp_2_cardinal}
  \vec{OP} \times \vec{R} + m_s \vec{OG} \times \vec{g} + \vec{OA} \times \vec{F}_A + \vec{M}_A +
  \begin{bmatrix}
    0 \\
    0 \\
    M_z
  \end{bmatrix} = \vec{0}
\end{equation}
where $\vec{R}$, $M_z$, $\vec{F}_A$, $\vec{M}_A$ and $m_s$ are presented in Figure
\ref{fig:zmp_foot}, while $\vec{OP}$, $\vec{OG}$ and $\vec{OA}$ are respectively the position vector
from the origin of the coordinate system $O_{xyz}$ to the ground reaction force acting point ($P$),
CoM of the foot ($G$) and the ankle joint ($A$).
\par

Projecting the second cardinal equation (\ref{eq:zmp_2_cardinal}) onto the $z$-axis and placing the
origin of the reference system $O$ at $P$ (i.e. $O \equiv P$), $M_z$ can be evaluated
\[
M_z = M_{fr} = [-(\vec{M}_A + \vec{PA} + \vec{F}_A)]_z
\]
where $[\vec{v}]_z$ means $\langle \vec{v},\vec{e}_3 \rangle$.
\par
The projection of the equation (\ref{eq:zmp_2_cardinal}) onto the horizontal plane ($xy$-plane) gives
\[
\left[\vec{OP} \times \vec{R} + m_s \vec{OG} \times \vec{g} + \vec{OA} \times \vec{F}_A + \vec{M}_A\right]_{(x,y)} = \vec{0}
\]
placing the origin of the reference system $O$ at $P$ (i.e. $O \equiv P$) the following relation is
obtained
\begin{equation}
  \label{eq:zmp_eq}
  \left[ m_s \vec{PG} \times \vec{g} + \vec{PA} \times \vec{F}_A + \vec{M}_A\right]_{(x,y)} = \vec{0}
\end{equation}
An intuitive understanding is ob obtained by setting $m_s = 0$ and $\vec{M}_A = \vec{0}$ in equation
(\ref{eq:zmp_eq})
\[
\left[\vec{PA} \times \vec{F}_A\right]_{(x,y)} = \vec{0}
\]
in this particular case $P$ is the point on the ground where the line of the action of $\vec{F}_A$
penetrates (Figure \ref{fig:zmp_foot_y_example}).
\begin{figure}[!ht]
  \centering
  \includegraphics[scale=0.56]{zmp_foot_y_example}
  \caption{ZMP simple example. Image edit from \cite{Vukobratov2004}. \label{fig:zmp_foot_y_example}}
\end{figure}
The equation (\ref{eq:zmp_eq}) allows to evaluate the ZMP position. In order to understand if the robot
is in dynamic equilibrium the position of $P$ must be within the support polygon. However, in reality, the
point $P$ cannot exist outside the support polygon.
\par
The following principle holds:
\begin{principle}
  The position of the point $P$ is inside the convex hull of the support polygon ($\Omega$)
  IFF the robot is in dynamic equilibrium.
  \[
  P \in \Omega \longleftrightarrow \text{dyanamic equilibrium}
  \]
  \par
  However if the point $P \in \partial \Omega$ it is not possible to conclude on the stability of the robotic system.
  \par
  Where $\partial \Omega$ is the boundary of $\Omega$ (i.e. $\bar{\Omega} = \Omega \cup \partial \Omega$).
\end{principle}
Thus, in same case, the position of zero momentum point may not be enough to distinguish between a
stable walk and an unstable one, to solve this problem a new conpcet mus be introduced, the
Fictitious Zero momentum point, also know with the name of Foot Rotation Indicator (FRI)
\cite{Goswami1999}.
\newpage
